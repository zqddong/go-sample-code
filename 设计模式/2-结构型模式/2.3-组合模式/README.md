### 组合模式

[引用](https://mp.weixin.qq.com/s/JKWbyr4Yt7A6l1nFsANUcQ)

_**组合，一个对数据结构算法和职场都有提升的设计模式**_

组合模式（Composite Pattern）又叫作部分-整体（Part-Whole）模式，它的宗旨是通过将单个对象（叶子节点）和组合对象（树枝节点）用相同的接口进行表示，使得客户对单个对象和组合对象的使用具有一致性，属于结构型设计模式。

#### 应用场景

组合模式的使用要求业务场景中的实体必须能够表示成树形结构才行，由组合模式将一组对象组织成树形结构，客户端（代码的使用者）可以将单个对象和组合对象都看做树中的节点，以统一处理逻辑，并且利用树形结构的特点，将对树、子树的处理转化成叶节点的递归处理，依次简化代码实现。

通过上边的描述我们可以马上想到文件系统、公司组织架构这些有层级结构的事物的操作会更适合应用组合模式。

组合模式由以下几个角色构成：

1. 组件 （Component）： 组件是一个接口，描述了树中单个对象和组合对象都要实现的的操作。
2. 叶节点 （Leaf） ：即单个对象节点，是树的基本结构， 它不包含子节点，因此也就无法将工作指派给下去，叶节点最终会完成大部分的实际工作。
3. 组合对象 （Composite）”——是包含叶节点或其他组合对象等子项目的符合对象。 组合对象不知道其子项目所属的具体类， 它只通过通用的组件接口与其子项目交互。
4. 客户端 （Client）： 通过组件接口与所有项目交互。 因此， 客户端能以相同方式与树状结构中的简单或复杂对象进行交互。

#### 组合和装饰器的区别

组合模式和装饰器模式在结构上很像，拥有非常相似的类结构（相似到组合模式的类图就是我Copy装饰器模式改了下方法名字......）。但是两者在使用意图上是有区别的。

组合模式：为叶子对象和组合对象提供了统一的接口，叶子对象分担组合对象要做的工作。其实组合对象就是派了下活儿，等下面的干完后，它再给上层调用者返（汇）回（报），类似于公司里的那些组合*。

装饰器模式：装饰器属于大哥带小弟的类型，核心的活儿是小弟干的（小弟就是被装饰的对象）但是各位大哥会帮你做好干活儿之外的事儿，比如公司你在公司里的Mentor、项目经理、领导们干的事儿就是给在给你做增强，你可以把他们理解成是你的装饰器

#### 组合模式的优点主要有以下两点

1. 实现类似树形结构，可以清楚地定义各层次的复杂对象，表示对象的全部或部分层次。
2. 简化了客户端代码，让客户端忽略了层次的差异，方便对整个层次结构进行控制。
实际上，组合模式与其说是一种设计模式，倒不如说是对业务场景的一种数据结构和算法的抽象，场景中的数据可以表示成树这种结构，业务需求的逻辑可以通过对树的递归遍历算法实现