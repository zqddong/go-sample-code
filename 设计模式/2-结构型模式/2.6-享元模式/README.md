### 享元模式

[摘自](https://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&mid=2247497613&idx=1&sn=428a4ffa977421b2b2c78f36585b7c62&chksm=fa83261acdf4af0c014190c5982b1b5af34018d69e12c3baf5a1f44b680056901103d2afd2c0&scene=178&cur_album_id=2531498848431669249#rd)

_**节省内存的好帮手**_

享元模式是一种结构型设计模式， 它的核心思想是通过共享多个对象所共有的相同状态，从而有效的支持在有限的内存中载入大量细粒度的对象。

享元模式的意图是复用对象，节省内存，前提是享元对象是不可变对象，不可变对象指的是初始化之后，对象的状态不会改变了，也就是不会存在被修改的情况。

#### 使用场景

当一个系统中有大量的重复对象的时候，如果这些对象是不可变对象，我们就可以使用享元模式，将这些对象设计成享元，在内存只保存一份，供需要的代码使用，这样能减少内存中对象的数量，起到节省内存的作用。

实际上，不仅仅相同对象可以设计成享元，对于相似对象，我们也可以将这些对象中相同的部分（字段）提取出来，设计成享元，让这些大量相似对象引用这些享元。

#### 实现思路

享元模式的实现思路是，在享元对象的工厂类中，通过一个 Map 来缓存已经创建的享元对象，达到复用的目的。

### 总结

享元模式其实是对象池的一种应用，在应用该模式之前， 我们需要确定程序中确实存在着大量拥有相同状态（字段）的相似对象同时占用内存的问题。

享元模式的优点是能减少对象的创建，降低内存中对象的数量，降低系统的内存，提高效率。其缺点是 我们在写程序时需要关注内、外部状态，关注线程安全问题，使系统、程序的逻辑复杂化。

所以在使用的时候我们需要综合考虑，确定系统存在大量相似对象占用内村过多的问题，这些对象的一些特征字段也确实能提炼成不可变对象作为享元让外部对象进行引用，再考虑使用该模式。